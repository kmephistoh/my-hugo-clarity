{{- $.Scratch.Add "index" slice -}}
{{- range .Site.Pages -}}
  {{- if and (.File) (ne .Type "search") -}}
    {{- $.Scratch.Add "index" (dict
        "id" .File.UniqueID
        "title" .Title
        "body" .Plain
        "link" .RelPermalink
        "section" .Section
        "tags" .Params.tags
    ) -}}
  {{- end -}}
{{- end -}}
{{- jsonify (uniq ($.Scratch.Get "index")) -}}